{% extends 'index/base.html' %}


{% block title %}
<title>Dublin Bus Prediction</title>
{% endblock %}


{% block main %}
<script>
    <!--$(document).ready(function(){-->
        <!--if($(window).width() <= 1200) {-->
            <!--window.location = "/indexmobile/";-->
        <!--}-->
    <!--});-->
    $(window).resize(function(){location.reload();});
    /*
     var user_name;
     var expires = new Date();
     var length = document.cookie.length -1;
     var message = document.cookie.substring(5, length)
     document.write("<h5><center> Welcome Back, " + message + "!</center></h5>")
     function cookierun(){
     user_name = document.getElementById("name").value;
     expires.setFullYear(expires.getFullYear()+1);
     document.cookie = escape("name") + "=" + escape(user_name) + "; expires = " + expires.toUTCString();
     window.alert(document.cookie);
     }
     */
    $(function() {
          navigator.geolocation.getCurrentPosition(function(position) {
                document.getElementById("setvalue").value = [position.coords.latitude, position.coords.longitude];
                document.getElementById("setval").value = [position.coords.latitude, position.coords.longitude];
                                });

        var td = new Date().getDay();
        td = (td == 0) ? 7 : td;
        $("select[id=day]").find("option").eq(td).prop("selected", true).end().change();
        var data = [{
            "Timestamp": "2012-11-07 09:26:50",
            "LineID": "145",
            "Direction": 0,
            "JourneyPatternID": "null",
            "TimeFrame": "2012-11-07",
            "VehicleJourneyID": 6745,
            "Operator": "D1",
            "Congestion": 0,
            "Lon": -6.292033,
            "Lat": 53.346668,
            "Delay": 0,
            "BlockID": 145107,
            "VehicleID": 38029,
            "StopID": "4320",
            "AtStop": 1,
            "Route_number": "145"
        }];
        $.each(data, function(i, option) {
            $("#RouteNumbers").append($("<option/>").attr("value", option.LineID).text(option.Route_number));
        });
    });
    {% load staticfiles %}

     </script>
<script src="{% static 'index/JavaScript/index.js' %}"></script>


<div id="homepage">
     <div id="main">
          <h1 id = 'heading'>Dublin Bus Dynamic Travel</h1>
     </div>
     <!--<div id="welcome_message">
         <p>Welcome to the Dublin Bus Dynamic Travel App {{ x }}</p>
     </div> -->
     <div id="center">
          <!--
          Name = <input type="text" id="name"/>
          <input type="button" value="Enter" id="cookierun()"/>
          -->
          <form action='detail/' method="post" autocomplete="off">
               {% csrf_token %}
               <div class="form-group">
                    <label for ="RouteNumbers">Route Number</label>
                    <select onchange="populate(value, {{ dicty }}, {{ locations }})" name="route" class="form-control" id="RouteNumbers">
                    <option selected value="0">
                         Select Route
                    </option>
                    {% for i in routes %}
                    <option value={{ i }} >
                         {{ i }}
                    </option>
                    {% endfor %}
               </select>
               </div>
               <div class="form-group">
                    <label for="origin">Origin Stop</label>
                    <select onchange="populateDestination(value, {{ dicty }}, {{ locations }})" name = "orig" class="form-control" id="origin">
                    <option selected value="0">
                         Select Route First
                    </option>
               </select>
               </div>
               <div class="form-group">
                    <label for ="destination">Destination Stop</label> <select name="dest" class="form-control" id="destination">
                    <option selected value="0">
                         Select Route First
                    </option>
               </select>
               </div>

               <div class="form-group">
                    <label for="time">Time</label> <select name="time" class="form-control" id="time">
                    <option selected value="0">
                         What time are you planning for?
                    </option>
                    <option selected value="100">
                         Right now!
                    </option>
                    {% for i in hours %}
                         {% for j in mins %}
                              <option value=({{ i }}.{{ j }})>
                                   {{ i }}.{{ j }}
                              </option>
                         {% endfor %}
                    {% endfor %}
                    <option value="0">
                         00.00
                    </option>
               </select>
               </div>
               <div class="form-group">
                    <label for ="day">Day</label> <select name = "day" class="form-control" id="day">
                    <option selected value="">
                    </option>
                    <option value="Monday1">
                         Monday
                    </option>
                    <option value="Tuesday2">
                         Tuesday
                    </option>
                    <option value="Wednesday3">
                         Wednesday
                    </option>
                    <option value="Thursday4">
                         Thursday
                    </option>
                    <option value="Friday5">
                         Friday
                    </option>
                    <option value="Saturday6">
                         Saturday
                    </option>
                    <option value="Sunday7">
                         Sunday
                    </option>
               </select>
               </div>
               <input type="submit" value="OK">
               <!--<button class="btn btn-danger" onclick="greeting()" type="button" >Submit</button>-->
               <input name = "current" id = "setval" type ="hidden" value="" />
          </form>
          <br>
          <form action ="find/"  method ="post">
               {% csrf_token %}
               <button class="btn btn-info" id = "setvalue" name = "current" value = "" type="submit">Not sure? Find Your Closest Bus Stops!</button>
               <p id="demo"></p>
          </form>
     </div>
</div>


{% endblock %}