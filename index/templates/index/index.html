{% extends 'index/base.html' %}


{% block title %}
<title>Dublin Bus Prediction</title>
{% endblock %}


{% block main %}
<script>

    var csrf = "{% csrf_token %}";
$(function() {
      navigator.geolocation.getCurrentPosition(function(position) {
            document.getElementById("setvalue").value = [position.coords.latitude, position.coords.longitude];
            document.getElementById("setval").value = [position.coords.latitude, position.coords.longitude];
            document.getElementById("setva").value = [position.coords.latitude, position.coords.longitude];
});

    var td = new Date().getDay();
    td = (td == 0) ? 7 : td;
    $("select[id=day]").find("option").eq(td).prop("selected", true).end().change();
    var data = [{
        "Timestamp": "2012-11-07 09:26:50",
        "LineID": "145",
        "Direction": 0,
        "JourneyPatternID": "null",
        "TimeFrame": "2012-11-07",
        "VehicleJourneyID": 6745,
        "Operator": "D1",
        "Congestion": 0,
        "Lon": -6.292033,
        "Lat": 53.346668,
        "Delay": 0,
        "BlockID": 145107,
        "VehicleID": 38029,
        "StopID": "4320",
        "AtStop": 1,
        "Route_number": "145"
    }];
    $.each(data, function(i, option) {
        $("#RouteNumbers").append($("<option/>").attr("value", option.LineID).text(option.Route_number));
    });
    loadValues();
});
</script>

{% load staticfiles %}
<script src="{% static 'index/JavaScript/index.js' %}"></script>
<link rel="stylesheet" href="{% static 'index/CSS/index_stylesheet.css' %}">

<body>

<!-- Nav Bar --------------------->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
        <ul class="nav navbar-nav">
            <li><a href="/" class="navbar-brand" href="/">Dublin Bus Dynamic Travel</a></li>
        </ul>
    </div>
</nav>

<!-- Background image carousel-->
<div id="background-carousel">
    <div id="myCarousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
            <div class="item active" style="background-image:url(https://preview.ibb.co/k5iFXk/149799775014462.jpg)"></div>
            <div class="item" style="background-image:url(https://wallpaperscraft.com/image/ireland_beach_coast_112870_800x600.jpg)"></div>
            <div class="item" style="background-image:url(https://wallpaperscraft.com/image/bridge_river_city_dublin_73527_1920x1080.jpg)"></div>
        </div>
    </div>
</div>

<!-- Main Body ------------------------------->
<div class="container text-center" style="background:transparent; margin-top:50px;">
    <div  class="text-center" id="index_center">

        <!-- Index Form ------------------------>
        <form id="index_form" class="well well-lg" action='detail/' method="post" autocomplete="off">

            {% csrf_token %}
            <div class="row">

                <div class="form-group col-xs-12 col-sm-4 col-md-4">
                    <label for ="RouteNumbers">Route Number</label>
                    <select onchange="populate(value, {{ dicty }}, {{ locations }})" name="route"
                            class="form-control" id="RouteNumbers" onchange="saveValues()">
                        <option selected value="0">Select Route</option>
                        {% for i in routes %}
                        <script>function alerts(i){alert(i);};</script>
                        <option onclick="alerts({{ i }})" value={{ i }} >{{ i }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group col-xs-12 col-sm-4 col-md-4">
                    <label for="origin">Origin Stop</label>
                    <select onchange="populateDestination(value, {{ dicty }}, {{ locations }})" name = "orig"
                            class="form-control" id="origin" onchange="saveValues()">
                        <option selected value="0">Select Route First</option>
                    </select>
                </div>

                <div class="form-group col-xs-12 col-sm-4 col-md-4">
                    <label for ="destination">Destination Stop</label>
                    <select name="dest" class="form-control" id="destination" onblur="saveValues()">
                        <option selected value="0">Select Route First</option>
                    </select>
                </div>

            </div>

            <div class="row">

                <div class="form-group col-xs-12 col-sm-6 col-md-6">
                    <label for="time">Time</label>
                    <select name="time" class="form-control" id="time" onchange="saveValues()">
                        <option selected value="0">What time are you planning for?</option>
                        <option selected value="100">Right now!</option>
                        {% for i in hours %}
                        {% for j in mins %}
                        <option value=({{ i }}.{{ j }})>
                            {{ i }}.{{ j }}
                        </option>
                        {% endfor %}
                        {% endfor %}
                        <option value="0">00.00</option>
                    </select>
                </div>

                <div class="form-group col-xs-12 col-sm-6 col-md-6">
                    <label for ="day">Day</label>
                    <select name = "day" class="form-control " id="day" onblur="saveValues()">
                        <option selected value=""></option>
                        <option value="Monday1">Monday</option>
                        <option value="Tuesday2">Tuesday</option>
                        <option value="Wednesday3">Wednesday</option>
                        <option value="Thursday4">Thursday</option>
                        <option value="Friday5">Friday</option>
                        <option value="Saturday6">Saturday</option>
                        <option value="Sunday7">Sunday</option>
                    </select>
                </div>
            </div>

            <button class="btn btn-info" type="submit" value="Search">
                Search  <i class="fa fa-search" aria-hidden="true"></i></button>



            <input name = "current" id = "setval" type ="hidden" value="">

        </form>

        <div id="MyPreference" style="display:none" class="well well-lg">
            <h3 id = "title"></h3>
            <form action="detail/" method="post" autocomplete="off">
                {% csrf_token %}
                <p id ="fillForm"></p>
                <input name = "current" id = "setva" type ="hidden" value='' />

                <button type="submit" class="btn btn-info">Yes, search!</button>
                </form>
                <button onclick="No_Hide()" class="btn btn-danger">No thanks</button>


        </div>


        <form action ="find/"  method ="post">
            {% csrf_token %}
            <button class="btn btn-info" id = "setvalue" name = "current" value = "" type="submit" style="font-size: 1.2em;">
                Not sure? Find Your Closest Bus Stops!</button>
        </form>
        <br>
        <form action ="luas/"  method ="post">
            {% csrf_token %}
            <button class="btn btn-info" id = "luas_button" name = "Luas" value = "" type="submit" style="font-size: 1.2em;">
                Live Luas Information</button>
        </form>

    </div>



</div>
</body>

{% endblock %}

<!--//    &lt;!&ndash;$(document).ready(function(){&ndash;&gt;-->
<!--//        &lt;!&ndash;if($(window).width() <= 1200) {&ndash;&gt;-->
<!--//            &lt;!&ndash;window.location = "/indexmobile/";&ndash;&gt;-->
<!--//        &lt;!&ndash;}&ndash;&gt;-->
<!--//    &lt;!&ndash;});&ndash;&gt;-->
<!--//    $(window).resize(function(){location.reload();});-->


<!--var user_name;-->
<!--var expires = new Date();-->
<!--var length = document.cookie.length -1;-->
<!--var message = document.cookie.substring(5, length)-->
<!--document.write("<h5><center> Welcome Back, " + message + "!</center></h5>")-->
<!--function cookierun(){-->
<!--user_name = document.getElementById("name").value;-->
<!--expires.setFullYear(expires.getFullYear()+1);-->
<!--document.cookie = escape("name") + "=" + escape(user_name) + "; expires = " + expires.toUTCString();-->
<!--window.alert(document.cookie);-->
<!--}-->

<!--
Name = <input type="text" id="name"/>
<input type="button" value="Enter" id="cookierun()"/>
-->